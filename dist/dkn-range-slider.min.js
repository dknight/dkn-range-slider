/*
 * https://github.com/dknight/dkn-range-slider
 * @license MIT
 * @version 0.1.8
*/
export class DknRangeSlider extends HTMLElement{constructor(){super(),this.connected=!1}static CONTROL_ATTRS=["value","min","max","step","name","disabled"];static RS_ID="rs";static get observedAttributes(){return DknRangeSlider.CONTROL_ATTRS.concat(["label-value","label-limit-min","label-limit-max","ticks","ticks-step"])}get value(){return Number(this.control.value)}set value(t){this.setAttribute("value",t),this.control.value=t,this.dispatchEvent(new Event("change"))}get min(){return Number(this.getAttribute("min"))}set min(t){this.setAttribute("min",t),this.control.min=t}get max(){return Number(this.control.max)}set max(t){this.setAttribute("max",t),this.control.max=t}get step(){return Number(this.control.step)||1}set step(t){this.setAttribute("step",t),this.control.step=t}get name(){return this.getAttribute("name")}set name(t){this.setAttribute("name",t)}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get ticks(){return this.hasAttribute("ticks")}set ticks(t){t?this.setAttribute("ticks",""):this.removeAttribute("ticks")}get ticksStep(){let t=Number(this.getAttribute("ticks-step"));return Number.isNaN(t)||t<=0?this.step:t}set ticksStep(t){this.setAttribute("ticks-step",t)}get labelValue(){return this.hasAttribute("label-value")}get labelSuffix(){return this.getAttribute("label-suffix")||""}get labelPrefix(){return this.getAttribute("label-prefix")||""}get labelAccess(){return this.getAttribute("label-access")||""}set labelAccess(t){return this.setAttribute("label-access",t)}get labelLimitMin(){return this.getAttribute("label-limit-min")||""}set labelLimitMin(t){this.setAttribute("label-limit-min",t)}get labelLimitMax(){return this.getAttribute("label-limit-max")||""}set labelLimitMax(t){this.setAttribute("label-limit-max",t)}createCtrl(){const t=document.createElement("input");return t.type="range",[...this.attributes].forEach((e=>{-1!==DknRangeSlider.CONTROL_ATTRS.indexOf(e.nodeName)&&t.setAttribute(e.nodeName,e.nodeValue)})),t}createLabel(){if(this.labelValue){const t=document.createElement("label");return t.classList.add("label-value"),t.innerText=this.getLabelText(),this.container.insertAdjacentElement("afterbegin",t),this.labelElem=t,t}}updateLabel(t){const e=t/this.control.max*100+"%";if(this.style.setProperty("--tx",e),this.labelValue){this.labelElem.innerText=this.getLabelText();const e=this.container.getBoundingClientRect().width,i=parseInt(getComputedStyle(this).getPropertyValue("--thumb-w"))||32,s=(t-this.control.min)/(this.control.max-this.control.min);this.labelElem.style.left=s*e-((s-.5)*i+4*(s-.5))+"px"}}getLabelText(){return this.labelPrefix+this.control.value+this.labelSuffix}createOut(){const t=document.createElement("input");return t.type="hidden",["value","name","disabled"].forEach((e=>{this[e]&&(t[e]=this[e])})),t}toggleLimLabel(t){const e=this.container.querySelector(`.${t}`),i=this.getAttribute(t);if(e&&!i)e.remove();else if(i){const e=document.createElement("label");e.classList.add(t),e.innerText=i,this.container.appendChild(e)}}createLabelAccess(){if(this.labelAccess){const t=document.createElement("label");t.setAttribute("for",DknRangeSlider.RS_ID),t.innerText=this.labelAccess,this.container.appendChild(t)}}attachHandlers(){this.control.addEventListener("change",(t=>{this.value=t.target.value,this.field.value=t.target.value,this.updateLabel(t.target.value)})),this.addEventListener("input",(t=>{this.updateLabel(t.target.value)}))}createTicks(){if(this.ticks){this.ticksElem=document.createElement("div"),this.ticksElem.classList.add("ticks");for(let t=this.min;t<=this.max;t+=this.ticksStep){const e=document.createElement("span");e.innerText=String(t),this.ticksElem.appendChild(e)}this.container.appendChild(this.ticksElem)}}removeTicks(){this.ticksElem&&(this.container.removeChild(this.ticksElem),delete this.ticksElem)}attributeChangedCallback(t,e,i){if(this.connected&&e!==i)switch(t){case"name":this.field.name=i;break;case"disabled":this.field.disabled=this.disabled,this.control.disabled=this.disabled;break;case"label-value":null==i?(this.labelElem.remove(),this.labelValueElem=null):(this.createLabel(),this.updateLabel(this.value));break;case"label-limit-min":case"label-limit-max":this.toggleLimLabel(t);break;case"ticks":null==i?this.removeTicks():this.createTicks();break;case"ticks-step":this.removeTicks(),this.createTicks();break;default:null==i?this.control.removeAttribute(t):this.control[t]=i}}connectedCallback(){this.connected||(this.root=this.attachShadow({mode:"open"}),this.styleElem=document.createElement("style"),this.styleElem.innerHTML=":host{display:flex;justify-content:space-between;margin:var(--range-selector-margin,0);font:var(--range-selector-font,10px/1 Arial,Helvetica,sans-serif);color:var(--labels-c,#3c3744);height:var(--range-selector-height,auto)}:host([disabled]){opacity:.5;pointer-events:none}:host([hidden]){display:none}input[type=range]{-webkit-appearance:none;width:100%;padding:var(--container-padding,0)}input[type=range]:focus{outline:0}label[for=rs]{border:0;clip:rect(1px,1px,1px,1px);clip-path:inset(50%);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.container{position:relative;flex:1;display:flex;flex-wrap:wrap}.label-value{position:relative;z-index:1;top:var(--label-value-y,-1rem);white-space:nowrap;color:var(--label-value-c,inherit);font:var(--label-value-font,bold 1.8em/1 Arial,Helvetica,sans-serif);padding:var(--label-value-padding,0);clip-path:var(--label-value-clip-path,none);background:var(--label-value-bg,none);pointer-events:none;text-align:center;transform:translateX(-50%)}.label-limit-max,.label-limit-min{margin:var(--label-lims-y,.8rem) 0 0 0;font:var(--lim-labels-font,1.6em Arial,Helvetica,sans-serif)}.label-limit-max{margin-left:auto}.ticks{display:flex;justify-content:space-between;margin-top:var(--ticks-y,0);width:100%}.ticks>*{color:var(--tick-c,var(--labels-c));display:flex;flex-direction:column;align-items:center;flex:1 1 0}.ticks>::before{content:'';display:block;width:var(--tick-w,.1rem);height:var(--tick-h,.8rem);margin:var(--tick-margin,0 0 .3rem);background:var(--tick-bg,var(--labels-c))}input[type=range]::-webkit-slider-runnable-track{-webkit-appearance:none;width:100%;height:var(--track-h,1.6rem);cursor:var(--track-cursor,pointer);box-shadow:var(--track-box-shadow,none);background:var(--track-bg,linear-gradient(var(--track-pc,#3c91e6),var(--track-pc,#3c91e6)) 0 / var(--tx) 100% no-repeat var(--track-c,#e2e2e2));border-radius:var(--track-border-radius,1rem);border:var(--track-border,none)}input[type=range]::-moz-range-track{width:100%;height:var(--track-h,1.6rem);cursor:var(--track-cursor,pointer);box-shadow:var(--track-box-shadow,none);background:var(--track-bg,linear-gradient(var(--track-pc,#3c91e6),var(--track-pc,#3c91e6)) 0 / var(--tx) 100% no-repeat var(--track-c,#e2e2e2));border-radius:var(--track-border-radius,1rem);border:var(--track-border,none)}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;box-shadow:var(--thumb-box-shadow,0 0 4px #3c91e6);height:var(--thumb-h,32px);width:var(--thumb-w,32px);border:var(--thumb-border,3px solid #fff);border-radius:var(--thumb-border-radius,50%);background:var(--thumb-bg,#3c91e6);cursor:var(--thumb-cursor,pointer);margin-top:calc(.5 * (var(--track-h) - var(--thumb-h)));box-sizing:border-box;transition:var(--thumb-transition,all .15s ease-in)}input[type=range]::-moz-range-thumb{box-shadow:var(--thumb-box-shadow,0 0 4px #3c91e6);height:var(--thumb-h,32px);width:var(--thumb-w,32px);border:var(--thumb-border,3px solid #fff);border-radius:var(--thumb-border-radius,50%);background:var(--thumb-bg,#3c91e6);cursor:var(--thumb-cursor,pointer);box-sizing:border-box;transition:var(--thumb-transition,all .15s ease-in)}input[type=range]:focus::-webkit-slider-thumb{outline:var(--focus-outline,1px dotted);transform:var(--thumb-focus-transform,scale(1.2))}input[type=range]:focus::-moz-range-thumb{outline:var(--focus-outline,1px dotted);transform:var(--thumb-focus-transform,scale(1.2))}",this.root.appendChild(this.styleElem),this.control=this.createCtrl(),this.control.id=DknRangeSlider.RS_ID,this.field=this.createOut(),this.container=document.createElement("div"),this.container.classList.add("container"),this.container.appendChild(this.control),this.createLabelAccess(),this.root.appendChild(this.container),this.createTicks(),this.appendChild(this.field),this.toggleLimLabel("label-limit-min"),this.toggleLimLabel("label-limit-max"),this.createLabel(),setTimeout((()=>this.updateLabel(this.control.value))),this.resizeHandler=()=>{this.updateLabel(this.control.value)},window.addEventListener("resize",this.resizeHandler),window.addEventListener("orientationchange",this.resizeHandler),this.attachHandlers(),this.connected=!0)}disconnectedCallback(){window.removeEventListener("resize",this.resizeHandler),window.removeEventListener("orientationchange",this.resizeHandler)}}customElements.get("dkn-range-slider")||customElements.define("dkn-range-slider",DknRangeSlider);
//# sourceMappingURL=dkn-range-slider.min.js.map
